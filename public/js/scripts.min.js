
$(function() {
    $('a[href*="#"]:not([href="#"])').click(function() {
        if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {
            var target = $(this.hash);
            target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
            if (target.length) {
                $('html, body').animate({
                    scrollTop: target.offset().top
                }, 500);
                return false;
            }
        }
    });
});

var options = {
  valueNames: [
    'img', 'year', 'location',
    'title',
    'presenters',
    'summary',
    'description',
    'image',
    'organisation',
    'organisationLink', {
      name: 'img',
      attr: 'src'
    }
  ],
  item: 'list-template'
};

function fetchChallenges(year) {
  current = (new Date).getFullYear() == year;
  var version = current ? "current" : "archive";
  $.get('data/challenges-' + version + '.json', function(data) {
    var challenges = JSON.parse(data);
    if (current) {
      challenges.forEach(function(challenge) {
        challenge.year = year;
        challenge.img = 'images/sponsors/' + challenge.image;
      })
    }
    var challengesList = new List('challenges-list', options, challenges);
  })
}

if ('registerElement' in document && 'createShadowRoot' in HTMLElement.prototype && 'import' in document.createElement('link') && 'content' in document.createElement('template')) {
// We're using a browser with native WC support!
} else {
	document.write('<script src="/bower_components/es6-shim/es6-shim.min.js"></script>');
	document.write('<script src="/bower_components/webcomponentsjs/webcomponents-lite.min.js"><\/script>');

}

if(!window.fetch) {
	document.write('<script src="/bower_components/fetch/fetch.js"></script>');
}

if("serviceWorker" in navigator) {
  navigator.serviceWorker.register('service-worker.js');
}

var sponsorsDiv = document.querySelector('#sponsors').querySelector('div > div >div');
var sponsorTemplate = document.querySelector('#sponsor-template');
function enumerateSponsorshipScope(scope) {
  switch(scope) {
    case 'national':
      return 2;
    case 'local':
      return 1;
    default:
      return -1;
  }
}

function enumerateLevel(level) {
  switch(level) {
    case 'gold':
      return 2;
    case 'silver':
      return 1;
    case 'community':
      return 0;
  }
}
fetch('/sponsors')
.then(function(resp) { return resp.json()})
.then(function(sponsors) {
  return sponsors.filter(function(sponsor) {
    return sponsor.text != "deleted";
  })

})
.then(function(sponsors) {
  return sponsors.sort(function(a,b) {
    return b.priority - a.priority;
  })
})
.then(function(sponsors) {
  console.log(sponsors);
  sponsors.forEach(function(sponsor) {
    var sponsorInst = $.clone(sponsorTemplate);
    sponsorInst.querySelector('a').href = sponsor.link;
    sponsorInst.querySelector('img').src= sponsor.logo;
    sponsorsDiv.appendChild(sponsorInst);
  });
})

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJzY3JpcHRzLm1pbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbiQoZnVuY3Rpb24oKSB7XG4gICAgJCgnYVtocmVmKj1cIiNcIl06bm90KFtocmVmPVwiI1wiXSknKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKGxvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCcnKSA9PSB0aGlzLnBhdGhuYW1lLnJlcGxhY2UoL15cXC8vLCcnKSAmJiBsb2NhdGlvbi5ob3N0bmFtZSA9PSB0aGlzLmhvc3RuYW1lKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzLmhhc2gpO1xuICAgICAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0Lmxlbmd0aCA/IHRhcmdldCA6ICQoJ1tuYW1lPScgKyB0aGlzLmhhc2guc2xpY2UoMSkgKyddJyk7XG4gICAgICAgICAgICBpZiAodGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiB0YXJnZXQub2Zmc2V0KCkudG9wXG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG52YXIgb3B0aW9ucyA9IHtcbiAgdmFsdWVOYW1lczogW1xuICAgICdpbWcnLCAneWVhcicsICdsb2NhdGlvbicsXG4gICAgJ3RpdGxlJyxcbiAgICAncHJlc2VudGVycycsXG4gICAgJ3N1bW1hcnknLFxuICAgICdkZXNjcmlwdGlvbicsXG4gICAgJ2ltYWdlJyxcbiAgICAnb3JnYW5pc2F0aW9uJyxcbiAgICAnb3JnYW5pc2F0aW9uTGluaycsIHtcbiAgICAgIG5hbWU6ICdpbWcnLFxuICAgICAgYXR0cjogJ3NyYydcbiAgICB9XG4gIF0sXG4gIGl0ZW06ICdsaXN0LXRlbXBsYXRlJ1xufTtcblxuZnVuY3Rpb24gZmV0Y2hDaGFsbGVuZ2VzKHllYXIpIHtcbiAgY3VycmVudCA9IChuZXcgRGF0ZSkuZ2V0RnVsbFllYXIoKSA9PSB5ZWFyO1xuICB2YXIgdmVyc2lvbiA9IGN1cnJlbnQgPyBcImN1cnJlbnRcIiA6IFwiYXJjaGl2ZVwiO1xuICAkLmdldCgnZGF0YS9jaGFsbGVuZ2VzLScgKyB2ZXJzaW9uICsgJy5qc29uJywgZnVuY3Rpb24oZGF0YSkge1xuICAgIHZhciBjaGFsbGVuZ2VzID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgY2hhbGxlbmdlcy5mb3JFYWNoKGZ1bmN0aW9uKGNoYWxsZW5nZSkge1xuICAgICAgICBjaGFsbGVuZ2UueWVhciA9IHllYXI7XG4gICAgICAgIGNoYWxsZW5nZS5pbWcgPSAnaW1hZ2VzL3Nwb25zb3JzLycgKyBjaGFsbGVuZ2UuaW1hZ2U7XG4gICAgICB9KVxuICAgIH1cbiAgICB2YXIgY2hhbGxlbmdlc0xpc3QgPSBuZXcgTGlzdCgnY2hhbGxlbmdlcy1saXN0Jywgb3B0aW9ucywgY2hhbGxlbmdlcyk7XG4gIH0pXG59XG5cbmlmICgncmVnaXN0ZXJFbGVtZW50JyBpbiBkb2N1bWVudCAmJiAnY3JlYXRlU2hhZG93Um9vdCcgaW4gSFRNTEVsZW1lbnQucHJvdG90eXBlICYmICdpbXBvcnQnIGluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKSAmJiAnY29udGVudCcgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKSkge1xuLy8gV2UncmUgdXNpbmcgYSBicm93c2VyIHdpdGggbmF0aXZlIFdDIHN1cHBvcnQhXG59IGVsc2Uge1xuXHRkb2N1bWVudC53cml0ZSgnPHNjcmlwdCBzcmM9XCIvYm93ZXJfY29tcG9uZW50cy9lczYtc2hpbS9lczYtc2hpbS5taW4uanNcIj48L3NjcmlwdD4nKTtcblx0ZG9jdW1lbnQud3JpdGUoJzxzY3JpcHQgc3JjPVwiL2Jvd2VyX2NvbXBvbmVudHMvd2ViY29tcG9uZW50c2pzL3dlYmNvbXBvbmVudHMtbGl0ZS5taW4uanNcIj48XFwvc2NyaXB0PicpO1xuXG59XG5cbmlmKCF3aW5kb3cuZmV0Y2gpIHtcblx0ZG9jdW1lbnQud3JpdGUoJzxzY3JpcHQgc3JjPVwiL2Jvd2VyX2NvbXBvbmVudHMvZmV0Y2gvZmV0Y2guanNcIj48L3NjcmlwdD4nKTtcbn1cblxuaWYoXCJzZXJ2aWNlV29ya2VyXCIgaW4gbmF2aWdhdG9yKSB7XG4gIG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCdzZXJ2aWNlLXdvcmtlci5qcycpO1xufVxuXG52YXIgc3BvbnNvcnNEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc3BvbnNvcnMnKS5xdWVyeVNlbGVjdG9yKCdkaXYgPiBkaXYgPmRpdicpO1xudmFyIHNwb25zb3JUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzcG9uc29yLXRlbXBsYXRlJyk7XG5mdW5jdGlvbiBlbnVtZXJhdGVTcG9uc29yc2hpcFNjb3BlKHNjb3BlKSB7XG4gIHN3aXRjaChzY29wZSkge1xuICAgIGNhc2UgJ25hdGlvbmFsJzpcbiAgICAgIHJldHVybiAyO1xuICAgIGNhc2UgJ2xvY2FsJzpcbiAgICAgIHJldHVybiAxO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gLTE7XG4gIH1cbn1cblxuZnVuY3Rpb24gZW51bWVyYXRlTGV2ZWwobGV2ZWwpIHtcbiAgc3dpdGNoKGxldmVsKSB7XG4gICAgY2FzZSAnZ29sZCc6XG4gICAgICByZXR1cm4gMjtcbiAgICBjYXNlICdzaWx2ZXInOlxuICAgICAgcmV0dXJuIDE7XG4gICAgY2FzZSAnY29tbXVuaXR5JzpcbiAgICAgIHJldHVybiAwO1xuICB9XG59XG5mZXRjaCgnL3Nwb25zb3JzJylcbi50aGVuKGZ1bmN0aW9uKHJlc3ApIHsgcmV0dXJuIHJlc3AuanNvbigpfSlcbi50aGVuKGZ1bmN0aW9uKHNwb25zb3JzKSB7XG4gIHJldHVybiBzcG9uc29ycy5maWx0ZXIoZnVuY3Rpb24oc3BvbnNvcikge1xuICAgIHJldHVybiBzcG9uc29yLnRleHQgIT0gXCJkZWxldGVkXCI7XG4gIH0pXG5cbn0pXG4udGhlbihmdW5jdGlvbihzcG9uc29ycykge1xuICByZXR1cm4gc3BvbnNvcnMuc29ydChmdW5jdGlvbihhLGIpIHtcbiAgICByZXR1cm4gYi5wcmlvcml0eSAtIGEucHJpb3JpdHk7XG4gIH0pXG59KVxuLnRoZW4oZnVuY3Rpb24oc3BvbnNvcnMpIHtcbiAgY29uc29sZS5sb2coc3BvbnNvcnMpO1xuICBzcG9uc29ycy5mb3JFYWNoKGZ1bmN0aW9uKHNwb25zb3IpIHtcbiAgICB2YXIgc3BvbnNvckluc3QgPSAkLmNsb25lKHNwb25zb3JUZW1wbGF0ZSk7XG4gICAgc3BvbnNvckluc3QucXVlcnlTZWxlY3RvcignYScpLmhyZWYgPSBzcG9uc29yLmxpbms7XG4gICAgc3BvbnNvckluc3QucXVlcnlTZWxlY3RvcignaW1nJykuc3JjPSBzcG9uc29yLmxvZ287XG4gICAgc3BvbnNvcnNEaXYuYXBwZW5kQ2hpbGQoc3BvbnNvckluc3QpO1xuICB9KTtcbn0pXG4iXSwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
