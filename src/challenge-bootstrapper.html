<link async rel="import" href="/async-js-imports.html">
<script>
  window.stampChallenges = function(year) {
    current = (new Date).getFullYear() == year;
    var version = current ? "current" : "archive";
    fetch('data/challenges-'+version+'.json')
    .then( function(resp) { return resp.json() })
    .then(function(challenges) {
      current = (new Date).getFullYear() == year;
      if(current) {
        challenges.forEach(function(challenge) {
          challenge.year = year;
          challenge.img = 'images/sponsors/'+challenge.image;
        })
      }
      document.querySelector('hh-challenges').challenges = challenges;
    }.bind(this));
  }
</script>
