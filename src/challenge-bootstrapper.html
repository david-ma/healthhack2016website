<link async rel="import" href="/async-js-imports.html">
<script>
  window.stampChallenges = function(year) {
    current = (new Date).getFullYear() == year;
    var version = current ? "current" : "archive";
    fetch('data/challenges-'+version+'.json')
    .then( function(resp) { return resp.json() })
    .then(function(challenges) {
      current = (new Date).getFullYear() == year;
      if(current) {
        document.querySelector('hh-challenges').challenges = challenges.filter(function(challenge) {
          return challenge.year == year;
        })
      } else {
          document.querySelector('hh-challenges').challenges = challenges.filter(function(challenge) {
            return challenge.year <= year;
          })
      }

    }.bind(this));
  }
</script>
